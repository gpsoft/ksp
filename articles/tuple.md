# データ構造入門 〜 タプル(とリレーション)

## タプル(組)

`{orange, apple, banana}`を集合Aとしましょう。

`{サル, ゾウ, ライオン, キリン}`を集合Bとします。

`{red, green, blue}`が集合Cです。

ここで、各集合から要素を1つずつ選択して、組み合わせてみましょう。

```
[orange, ゾウ, green]
[apple, キリン, red]
[apple, ゾウ, blue]
...
```

などなど、いろんな組み合わせが考えられます。これら一つ一つをタプルと呼びます。ここでは角カッコで表記してますが、別にこれは決まりではありません。

タプルは配列のようにも見えますが、

- 固定長である(この例の場合は3)
- 位置が決まっている(この例の場合は集合A, 集合B, 集合Cの順)

というルールがあります。

## プログラムの中のタプル

プログラムの中では、いろんな方法でタプルを実現できます。例えばJavaScriptなら、配列で`['orange', 'ゾウ', 'green']`などと表現してもいいし、オプジェクト`{'A': 'orange', 'B': 'ゾウ', 'C': 'green'}`も広い意味ではタプルと考えて良いでしょう。

タプルは、即席のデータ構造が欲しいときに便利です。例えば、関数がエラーコードとエラーメッセージを返したいが、わざわざクラスを定義するまでもない、といったケースで、phpなら…

```php
function hoge() {
    ...
    ...
    return [$code, $msg];
}
```

のように書くでしょう。この`[$code, $msg]`がタプルです。ちなみに、呼び出し側では…

```php
list($code, $msg) = hoge();
```

のように受け取ります。

## 直積

集合A, B, Cの例に戻ります。すべての組み合わせ、つまりすべてのタプルを要素とする集合を考えてみましょう。

```
{[orange, サル, red],
 [orange, サル, green],
 [orange, サル, blue],
 ...
 [banana, キリン, blue]}
```

組み合わせは、全部で3×4×3通り。36個のタプルからなる集合です。このような集合を、集合A, B, Cの直積とかデカルト積と呼びます(あのデカルトです)。

## リレーション(関係)

リレーションは、直積の部分集合です。例えば…

```
{[orange, ゾウ, green],
 [apple, キリン, red],
 [banana, ライオン, green],
 [apple, ゾウ, blue]}
```

これは、リレーションの一例です。そしてこれが、リレーショナル・データベースのテーブルの正体であり、「リレーショナル」の由来です。先頭のカラムがfruitで型A、次がanimalで型B、最後がcolorで型Cと考えれば符合しますね。上の例は、4つのレコードが格納されたテーブルを表しています。

リレーション(=テーブル)は、タプル(=行、レコード)の集合です。集合なので、その要素間に順序はありません。テーブルを表として書くと、各レコードが上から下へ並ぶので、まるで順序があるように見えますが、本来、テーブルのレコード間に順序は無いのです。
